!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["FLOODING-PROMISE"]=n():t["FLOODING-PROMISE"]=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=7)}([function(t,n,e){var r=e(8),i=e(2),o=e(14),u=e(4);t.exports={ndfunc:i,ndfuncterm:o,ndcls:r,ndutil:u}},function(t,n){t.exports={gen_guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)}))},range:function(t,n){return Array.from({length:n-t}).map((function(n,e){return e+t}))},seqs_slct:function(t,n){return n.filter((function(n,e){return t.includes(e)}))},dict_length:function(t){return Object.entries(t).length},is_empty_dict:function(t){return 0===Object.entries(t).length},dict_values:function(t){return Object.entries(t).map((function(t){return t[1]}))},dict_keys:function(t){return Object.entries(t).map((function(t){return t[0]}))},dict_map:function(t,n){for(var e in t)t[e]=n(e,t[e]);return t},dict_foreach:function(t,n){for(var e in t)n(e,t[e]);return t},dict_plus:function(t,n){for(var e in n)t[e]=n[e];return t},dict_update:function(t,n){for(var e in n){!(e in t)&&(t[e]=n[e])}return t},dtb_kv_rm:function(t,n,e){return e=e.filter((function(e){return e[t]!==n}))},dtb_kv_get_seq:function(t,n,e){return e.findIndex((function(e){return e[t]===n}))},dcp:function(t){return JSON.parse(JSON.stringify(t))},mat_map:function(t,n){for(var e=0;e<t.length;e++){lyr=t[e];for(var r=0;r<lyr.length;r++)t[e][r]=n(t[e][r],e,r)}return t},is_cu_property:function(t){var n="_"!==t[0],e="$"!==t[0];return n&&e}}},function(t,n,e){var r;function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var f=e(1);function s(t){if(f.is_empty_dict(t))return 0;var n=f.dict_keys(t);return Math.max.apply(Math,o(n))+1}function a(t){return null!=t}function l(t,n){return t._id=t._id+n,t._tree=t._tree+n,a(t._fstch)&&(t._fstch=t._fstch+n),a(t._lsib)&&(t._lsib=t._lsib+n),a(t._rsib)&&(t._rsib=t._rsib+n),a(t._parent)&&(t._parent=t._parent+n),t}function c(t,n){var e=s(t);for(var r in n){var i=l(n[r],e);n[i._id]=i,delete n[r]}return n}function h(t){return void 0!==t._tree}function d(t){var n=void 0!==t._tree,e=t._tree===t._id;return n&&e}function p(t){return null===t._lsib}function v(t){return null===t._rsib}function _(t){return null===t._fstch}function y(t,n){return!!d(t)||1===P(q(t,n),n).length}function g(t){return d(t)||!h(t)}function b(t,n,e){if(!g(n))return console.log("only root or uninited could be prepend"),t;var r=_(t);if(n._tree=t._tree,n._lsib=null,r)n._rsib=null,n._parent=t._id;else{var i=e[t._fstch];i._lsib=void 0,n._rsib=i._id,n._parent=void 0}return t._fstch=n._id,e[n._id]=n,t}function m(t,n,e){if(!g(n))return console.log("only root or uninited could be append"),t;var r=_(t);if(n._tree=t._tree,n._rsib=null,r)t._fstch=n._id,n._lsib=null;else{var i=R(t,e);i._parent=void 0,i._rsib=n._id,n._lsib=void 0}return n._parent=t._id,e[n._id]=n,t}function w(t,n,e){if(!g(n))return console.log("only root or uninited could be add"),t;if(d(t))return console.log("cant addrsib to root"),t;var r=v(t);return n._tree=t._tree,r?(n._parent=t._parent,t._parent=void 0,n._rsib=null):(n._rsib=t._rsib,n._parent=void 0),t._rsib=n._id,n._lsib=void 0,e[n._id]=n,t}function $(t,n,e){if(!g(n))return console.log("only root or uninited could be add"),t;if(d(t))return console.log("cant addlsib to root"),t;var r=p(t);if(n._tree=t._tree,r){var i=q(t,e);t._lsib=void 0,n._lsib=null,i._fstch=n._id}else{C(t,e)._rsib=n._id,n._lsib=void 0}return n._rsib=t._id,n._parent=void 0,e[n._id]=n,t}function k(t,n,e,r){var i=P(n,r),o=i.length;return 0===o?b(n,e,r):t<=o&&t>=0?0===t?b(n,e,r):t===o?m(n,e,r):w(i[t-1],e,r):(console.log("not in range!!"),n)}function x(t,n){for(var e in n)n[e]._tree=t._tree}function S(t,n){var e=H(t,n),r=e[0]._id;return e.forEach((function(t){t._tree=r})),e}function E(t,n){var e={};return t.map((function(t){var r=t._id;e[r]=t,delete n[r]})),e}function O(t){return t._fstch=null,t}function A(t){return t._lsib=null,t._rsib=null,t._parent=null,t}function j(t,n){if(d(t))return[t,n];if(y(t,n)){O(n[t._parent]);var e=E(S(t,n),n);return A(t),[t,e]}if(p(t)){N(t,n)._lsib=null,q(t,n)._fstch=t._rsib;var r=E(S(t,n),n);return A(t),[t,r]}if(v(t)){var i=C(t,n);i._rsib=t._rsib,i._parent=t._parent;var o=E(S(t,n),n);return A(t),[t,o]}C(t,n)._rsib=t._rsib;var u=E(S(t,n),n);return A(t),[t,u]}function T(t,n){return null===t._fstch?null:n[t._fstch]}function P(t,n){for(var e=[],r=T(t,n);null!==r;)e.push(r),r=N(r,n);return e}function R(t,n){var e=P(t,n);return 0===e.length?null:e[e.length-1]}function M(t,n,e){var r=P(n,e);return 0===r.length||t>r.length-1||t<0?null:r[t]}function U(t,n){var e=P(t,n),r=[];if(0===e.length);else for(var i=0;i<(arguments.length<=2?0:arguments.length-2);i++){var o=i+2<2||arguments.length<=i+2?void 0:arguments[i+2],u=o>e.length-1||o<0;u||r.push(e[o])}return r}function I(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t,i=N(t,n);null!==i;)r=i,i=N(i,n);return e||r._id!==t._id?r:null}function B(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=q(t,n);return e=null!==i?P(i,n):[t],r?e:e=f.dtb_kv_rm("_id",t._id,e)}function C(t,n){var e=B(t,n,!0),r=f.dtb_kv_get_seq("_id",t._id,e);return 0===r?null:e[r-1]}function N(t,n){return null===t._rsib?null:n[t._rsib]}function D(t,n){return F(t,n,!0).length-1}function L(t,n){var e=D(t,n),r=H(t,n).map((function(t){return D(t,n)}));return Math.max.apply(Math,o(r))-e+1}function Y(t,n){var e=H(J(t,n),n),r=D(t,n);return e.filter((function(t){return D(t,n)===r}))}function z(t,n){var e=Y(t,n);return f.dtb_kv_get_seq("_id",t._id,e)}function J(t,n){for(var e=t,r=q(t,n);null!==r;)e=r,r=q(r,n);return e}function q(t,n){var e;d(t)?e=null:e=n[I(t,n,!0)._parent];return e}function F(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=q(t,n);null!==i;)r.push(i),i=q(i,n);return e&&r.unshift(t),r}function W(t,n){for(var e=q(t,n);null!==e;){var r=N(e,n);if(null!==r)return r;e=q(e,n)}return null}function V(t,n){var e=T(t,n);if(null!==e)return e;var r=N(t,n);return null!==r?r:W(t,n)}function G(t,n){for(var e=t,r=R(t,n);null!==r;)e=r,r=R(r,n);return e}function H(t,n){for(var e=D(t,n),r=[];null!==t;){if(r.push(t),null!==(t=V(t,n)))if(D(t,n)<=e)break}return r}function Z(t,n){for(var e=t,r=T(t,n);null!==r;)e=r,r=T(r,n);return e}function X(t,n){var e=N(t,n);return null===e?q(t,n):Z(e,n)}function K(t,n){for(var e=q(t,n);null!==e;){var r=C(e,n);if(null!==r)return r;e=q(e,n)}return null}function Q(t,n){for(var e=[],r=Z(t,n);null!==r&&(e.push(r),r._id!==t._id);)r=X(r,n);return e}function tt(t){f.dict_foreach(t,(function(n,e){t[n]._$visited=!1}))}function nt(t,n){var e=t._$visited;if(_(t)){if(e){var r=N(t,n);return null===r?q(t,n):r}return t._$visited=!0,t}if(e){var i=N(t,n);return null===i?q(t,n):i}return t._$visited=!0,T(t,n)}function et(t,n){return n._$visited&&t===n._id}function rt(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[];tt(n);for(var o=t._id;!et(o,t);)e?i.push(f.dcp(t)):i.push(t),t=nt(t,n);return e?i.push(f.dcp(t)):i.push(t),r&&tt(n),i}function it(t){var n={ele:{}};return n.nd=t,n.ele._id=t._id,n.ele._children=[],n}function ot(t,n){var e=[],r=[it(t[0])];r[0].ele._pbreadth=null;for(var i=function(){for(var t=[],i=function(i){r[i].ele._breadth=i,r[i].ele._depth=e.length;var o=P(r[i].nd,n);(o=o.map((function(t){return it(t)}))).forEach((function(n,o){n.ele._pbreadth=r[i].ele._breadth,r[i].ele._children.push([e.length+1,t.length+o])})),t=t.concat(o)},o=0;o<r.length;o++)i(o);var u=r.map((function(t){return t.ele}));e.push(u),r=t};r.length>0;)i();return e}function ut(t,n){return Q(t[0],n)}function ft(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return rt(t[0],n,e,r)}function st(t,n){return H(t[t.length-1],n)}function at(t,n){return H(t[0],n)}function lt(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=H(t,n);return e||r.splice(0,1),r}function ct(t,n,e){var r=D(n,e),i=lt(n,e,!1);sdfs.map((function(t){return D(t,e)}));return i=i.filter((function(n){return D(n,e)===r+t}))}function ht(t){return J(t[f.dict_keys(t)[0]],t)}t.exports=(i(r={calc_next_id:s,update_nodes_ids:c,creat_root:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n={_id:t,_fstch:null,_lsib:null,_rsib:null,_parent:null,_tree:t};return n},creat_nd:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=s(t)+n,r={_id:e,_fstch:null,_lsib:void 0,_rsib:void 0,_parent:void 0,_tree:void 0};return r},is_inited:h,is_root:d,is_fstch:p,is_lstch:v,is_leaf:_,is_lonely:y,is_id:a,is_connectable:g,prepend_child:b,append_child:m,insert_child:k,add_rsib:w,add_lsib:$,get_fstch:T,get_rsib:N,get_children:P,get_lstch:R,get_which_child:M,get_some_children:U,get_fstsib:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=B(t,n,!0);return e?r[0]:r[0]._id===t._id?null:r[0]},get_lstsib:I,get_preceding_sibs:function(t,n){var e=B(t,n,!0),r=f.dtb_kv_get_seq("_id",t._id,e),i=[];if(0===e.length);else for(var o=0;o<e.length;o++){o<r&&i.push(e[o])}return i},get_following_sibs:function(t,n){var e=B(t,n,!0),r=f.dtb_kv_get_seq("_id",t._id,e),i=[];if(0===e.length);else for(var o=0;o<e.length;o++){o>r&&i.push(e[o])}return i},get_sibs:B,get_which_sib:function(t,n,e){var r=B(n,e,!0);return t<=r.length-1&&t>=0?r[t]:null},get_some_sibs:function(t,n){var e=B(t,n,!0),r=[];if(0===e.length);else for(var i=0;i<(arguments.length<=2?0:arguments.length-2);i++){var o=i+2<2||arguments.length<=i+2?void 0:arguments[i+2],u=o>e.length-1||o<0;u||r.push(e[o])}return r},get_sibseq:function(t,n){var e=B(t,n,!0);return f.dtb_kv_get_seq("_id",t._id,e)},get_lsib:C},"get_rsib",N),i(r,"get_lyr",Y),i(r,"get_breadth",z),i(r,"get_count",(function(t,n){return H(t,n).length})),i(r,"get_depth",D),i(r,"get_height",L),i(r,"get_fst_lyr_des_depth",(function(t,n){return _(t)?null:D(t,n)+1})),i(r,"get_lst_lyr_des_depth",(function(t,n){if(_(t))return null;D(t,n);var e=H(t,n).map((function(t){return D(t,n)}));return Math.max.apply(Math,o(e))})),i(r,"get_which_lyr_des_depth",(function(t,n,e){var r=D(n,e);return L(n,e)<=t?null:r+t})),i(r,"get_root",J),i(r,"get_parent",q),i(r,"get_ances",F),i(r,"get_which_ance",(function(t,n,e){var r=F(n,e,!0);return t<r.length&&t>=0?r[t]:null})),i(r,"get_some_ances",(function(t,n){var e=F(t,n,!0),r=[];if(0===e.length);else for(var i=0;i<(arguments.length<=2?0:arguments.length-2);i++){var o=i+2<2||arguments.length<=i+2?void 0:arguments[i+2],u=o>e.length-1||o<0;u||r.push(e[o])}return r})),i(r,"get_rsib_of_fst_ance_having_rsib",W),i(r,"get_sdfs_next",V),i(r,"get_drmost_des",G),i(r,"get_sdfs_prev",(function(t,n){if(d(t))return null;if(_(t)){var e=C(t,n);return null!==e?e:q(t,n)}var r=C(t,n);return null!==r?_(r)?r:G(r,n):q(t,n)})),i(r,"get_sdfs",H),i(r,"get_lsib_of_fst_ance_having_lsib",K),i(r,"get_dlmost_des",Z),i(r,"get_edfs_next",X),i(r,"get_edfs_prev",(function(t,n){if(_(t)){var e=C(t,n);return null===e?K(t,n):e}return R(t,n)})),i(r,"get_edfs",Q),i(r,"clear_$visited",tt),i(r,"get_sedfs_next",nt),i(r,"is_sedfs_traverse_finished",et),i(r,"get_sedfs_prev",(function(t,n,e){if(_(n)){if(t)return n;var r=C(n,e);return null===r?q(n,e):r}if(t)return R(n,e);var i=C(n,e);return null===i?q(n,e):i})),i(r,"get_sedfs",rt),i(r,"get_deses",lt),i(r,"get_fst_lyr_deses",(function(t,n){return P(t,n)})),i(r,"get_lst_lyr_deses",(function(t,n){var e=lt(t,n,!1),r=sdfs.map((function(t){return D(t,n)})),i=Math.max.apply(Math,o(r));return e=e.filter((function(t){return D(t,n)===i}))})),i(r,"get_which_lyr_deses",ct),i(r,"get_some_lyrs_deses",(function(t,n){for(var e,r=arguments.length,i=new Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];var f=i.map((function(e){return ct(e,t,n)}));return f=(e=Array.prototype).concat.apply(e,o(f))})),i(r,"nd2ele",(function(t,n){var e={};e._depth=D(t,n),e._breadth=z(t,n);var r=q(t,n);return e._pbreadth=null===r?null:z(r,n),e._id=t._id,e})),i(r,"sdfs2mat",ot),i(r,"sdfs2edfs",ut),i(r,"sdfs2sedfs",ft),i(r,"edfs2mat",(function(t,n){return ot(st(t,n),n)})),i(r,"edfs2sdfs",st),i(r,"edfs2sedfs",(function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=st(t,n);return ft(i,n,e,r)})),i(r,"sedfs2mat",(function(t,n){return ot(at(t,n),n)})),i(r,"sedfs2sdfs",at),i(r,"sedfs2edfs",(function(t,n){return ut(at(t,n),n)})),i(r,"update_disconnected_nodes",S),i(r,"update_orig_nodes",E),i(r,"leafize",O),i(r,"rootize",A),i(r,"disconnect",j),i(r,"rm_fstch",(function(t,n){var e=T(t,n);return null===e?[t,n]:j(e,n)})),i(r,"rm_lstch",(function(t,n){var e=R(t,n);return null===e?[t,n]:j(e,n)})),i(r,"rm_which",(function(t,n,e){var r=M(t,n,e);return null===r?[n,e]:j(r,e)})),i(r,"rm_some",(function(t,n){for(var e=U.apply(void 0,[t,n].concat(o(whiches))),r=0;r<e.length;r++)j(e[r],n);return[t,n]})),i(r,"rm_all",(function(t,n){for(var e=P(t,n),r=0;r<e.length;r++)j(e[r],n);return n})),i(r,"update_treeid",x),i(r,"update_one_nodeid",l),i(r,"update_nodes_ids",c),i(r,"prepend_child_tree",(function(t,n,e){return x(t=b(t,J((e=c(n,e))[f.dict_keys(e)[0]],e),n),e),f.dict_plus(n,e),t})),i(r,"append_child_tree",(function(t,n,e){return x(t=m(t,J((e=c(n,e))[f.dict_keys(e)[0]],e),n),e),f.dict_plus(n,e),t})),i(r,"add_rsib_tree",(function(t,n,e){return x(t=w(t,J((e=c(n,e))[f.dict_keys(e)[0]],e),n),e),f.dict_plus(n,e),t})),i(r,"add_lsib_tree",(function(t,n,e){return x(t=$(t,J((e=c(n,e))[f.dict_keys(e)[0]],e),n),e),f.dict_plus(n,e),t})),i(r,"insert_child_tree",(function(t,n,e,r){return x(n=k(t,n,J((r=c(e,r))[f.dict_keys(r)[0]],r),e),r),f.dict_plus(e,r),n})),i(r,"get_root_via_tree",ht),i(r,"tree2sdfs",(function(t){return H(ht(t),t)})),r)},function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":e(window))&&(r=window)}t.exports=r},function(t,n){t.exports={rjson:function(t){if(void 0===globalThis.document){var n=globalThis.require("fs").readFileSync(t).toString();return JSON.parse(n)}},wjson:function(t,n){if(void 0===globalThis.document){var e=globalThis.require("fs"),r=JSON.stringify(n);e.writeFileSync(t,r)}},is_int_str:function(t){return parseInt(t).toString()===t}}},function(t,n,e){(function(n){function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}function u(t,n){var e=n.get(t);if(!e)throw new TypeError("attempted to get private field on non-instance");return e.get?e.get.call(t):e.value}function f(t,n,e){var r=n.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}return e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a;function l(){try{return void 0!==(a=e(6)).inspect.custom&&"symbol"===s(a.inspect.custom)}catch(t){return!1}}function c(){var t=Object.create(null);return Object.freeze(t),t}var h=function(){var t=function t(){r(this,t)};Object.defineProperty(t,"name",{value:"None"});var n=new t;return Object.freeze(n),n}(),d=c(),p=c(),v=c(),_=Symbol("empty"),y=Symbol("unknown"),g=Symbol("impossible"),b=Symbol("maybe");function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)}))}t.exports={optional_chaining:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=0;i<e.length&&void 0!==(t=t[e[i]]);i++);return t},nullish:function(t,n){return null==t?n:t},nc:function(t,n){return null==t?n:t},is_null:function(t){return null===t},is_undefined:function(t){return void 0===t},is_node:l,add_repr:function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=l();o?t.prototype[a.inspect.custom]=function(){return n.apply(void 0,[this].concat(r))}:t.prototype.repr=function(){return n.apply(void 0,[this].concat(r))}},creat_reserved:function(){var t,e=new WeakMap;t=util.inspect.custom;for(var i=function(){function n(t,i){r(this,n),e.set(this,{writable:!0,value:void 0}),f(this,e,t)}return o(n,[{key:t,value:function(){return u(this,e)}}]),n}(),s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];a.forEach((function(t){var e=1===t.length?new i(t[0]):t[1];Object.defineProperty(n,t[0],{value:e,writable:!1,enumerable:!1,configurable:!1})}))},Nil:function t(){r(this,t)},nfunc:function(){},None:h,nil:d,nullptr:p,NULL:v,empty:_,unknown:y,impossible:g,maybe:b,NUL:"\0",NBSP:" ",LS:"\u2028",PS:"\u2029",ZWNJ:"‌",ZWJ:"‍",BOM:"\ufeff"};try{var w=e(20).v4;t.exports.creat_id=w,t.exports.creat_uuid=w}catch(n){t.exports.creat_id=m}t.exports.creat_guid=m,t.exports.get_abbr=function(t){return t.substr(0,8)}}).call(this,e(3))},function(t,n,e){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=Object.getOwnPropertyDescriptors||function(t){for(var n=Object.keys(t),e={},r=0;r<n.length;r++)e[n[r]]=Object.getOwnPropertyDescriptor(t,n[r]);return e},o=/%[sdj%]/g;n.format=function(t){if(!g(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(s(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,i=r.length,u=String(t).replace(o,(function(t){if("%%"===t)return"%";if(e>=i)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}})),f=r[e];e<i;f=r[++e])_(f)||!w(f)?u+=" "+f:u+=" "+s(f);return u},n.deprecate=function(e,r){if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return n.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var u,f={};function s(t,e){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&n._extend(r,e),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,t,r.depth)}function a(t,n){var e=s.styles[n];return e?"["+s.colors[e][0]+"m"+t+"["+s.colors[e][1]+"m":t}function l(t,n){return t}function c(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return g(i)||(i=c(t,i,r)),i}var o=function(t,n){if(b(n))return t.stylize("undefined","undefined");if(g(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}if(y(n))return t.stylize(""+n,"number");if(v(n))return t.stylize(""+n,"boolean");if(_(n))return t.stylize("null","null")}(t,e);if(o)return o;var u=Object.keys(e),f=function(t){var n={};return t.forEach((function(t,e){n[t]=!0})),n}(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),k(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return h(e);if(0===u.length){if(x(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(m(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if($(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return h(e)}var a,l="",w=!1,S=["{","}"];(p(e)&&(w=!0,S=["[","]"]),x(e))&&(l=" [Function"+(e.name?": "+e.name:"")+"]");return m(e)&&(l=" "+RegExp.prototype.toString.call(e)),$(e)&&(l=" "+Date.prototype.toUTCString.call(e)),k(e)&&(l=" "+h(e)),0!==u.length||w&&0!=e.length?r<0?m(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),a=w?function(t,n,e,r,i){for(var o=[],u=0,f=n.length;u<f;++u)j(n,String(u))?o.push(d(t,n,e,r,String(u),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(t,n,e,r,i,!0))})),o}(t,e,r,f,u):u.map((function(n){return d(t,e,r,f,n,w)})),t.seen.pop(),function(t,n,e){if(t.reduce((function(t,n){return n.indexOf("\n")>=0&&0,t+n.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1];return e[0]+n+" "+t.join(", ")+" "+e[1]}(a,l,S)):S[0]+l+S[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,n,e,r,i,o){var u,f,s;if((s=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]}).get?f=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(f=t.stylize("[Setter]","special")),j(r,i)||(u="["+i+"]"),f||(t.seen.indexOf(s.value)<0?(f=_(e)?c(t,s.value,null):c(t,s.value,e-1)).indexOf("\n")>-1&&(f=o?f.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+f.split("\n").map((function(t){return"   "+t})).join("\n")):f=t.stylize("[Circular]","special")),b(u)){if(o&&i.match(/^\d+$/))return f;(u=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+f}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function _(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function b(t){return void 0===t}function m(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"===r(t)&&null!==t}function $(t){return w(t)&&"[object Date]"===S(t)}function k(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function x(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(e){if(b(u)&&(u=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!f[e])if(new RegExp("\\b"+e+"\\b","i").test(u)){var r=t.pid;f[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else f[e]=function(){};return f[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=v,n.isNull=_,n.isNullOrUndefined=function(t){return null==t},n.isNumber=y,n.isString=g,n.isSymbol=function(t){return"symbol"===r(t)},n.isUndefined=b,n.isRegExp=m,n.isObject=w,n.isDate=$,n.isError=k,n.isFunction=x,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===r(t)||void 0===t},n.isBuffer=e(16);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var t=new Date,n=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],n].join(" ")}function j(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e(17),n._extend=function(t,n){if(!n||!w(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,n){if(!t){var e=new Error("Promise was rejected with a falsy value");e.reason=t,t=e}return n(t)}n.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var n;if("function"!=typeof(n=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,T,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,e,r=new Promise((function(t,r){n=t,e=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?e(t):n(r)}));try{t.apply(this,i)}catch(t){e(t)}return r}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),T&&Object.defineProperty(n,T,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,i(t))},n.promisify.custom=T,n.callbackify=function(n){if("function"!=typeof n)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,u=function(){return i.apply(o,arguments)};n.apply(this,e).then((function(n){t.nextTick(u,null,n)}),(function(n){t.nextTick(P,n,u)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(n)),Object.defineProperties(e,i(n)),e}}).call(this,e(15))},function(t,n,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i;function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,n,e){return n&&u(t.prototype,n),e&&u(t,e),t}function s(t,n){return(s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function a(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=h(t);if(n){var i=h(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return l(this,e)}}function l(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?c(t):n}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,n){var e=n.get(t);if(!e)throw new TypeError("attempted to get private field on non-instance");return e.get?e.get.call(t):e.value}function p(t,n,e){var r=n.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}return e}function v(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,o=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw o}}}}function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var y=e(0).ndcls.Root,g=e(5),b=e(18),m=b.Cfg,w=b.load_to_sdfs,$={resolved:new Error("use-rslt-or-final"),rejected:new Error("use-rejected-or-final"),in_executing:new Error("still-in-executing-use-force-reset"),need_reset:new Error("reset-before-relaunch"),must_set_controller:new Error("(rs,rj,sdfs)=>{...}")},k={ignore_error:!1},x=function(t,n,e){},S=Symbol("exec"),E=Symbol("task_name"),O=Symbol("type"),A=Symbol("promise"),j=Symbol("controller"),T=Symbol("reset"),P=Symbol("reset_exec"),R=Symbol("impossible"),M=Symbol("set_impossible"),U=Symbol("unset_impossible");function I(t){if(t.options.ignore_error||t.is_resolved()){t.$children().forEach((function(t){t[S]()}))}else{var n=t.$sdfs();(n=n.slice(1)).forEach((function(t){t.$sdfs().forEach((function(t){return t[M]()}))})),t[j][Z](t)}}function B(t){var n,e=v(t);try{for(e.s();!(n=e.n()).done;){if("pending"===n.value.state)return!0}}catch(t){e.e(t)}finally{e.f()}return!1}function C(t){var n=void 0===t.handler?x:t.handler,e=JSON.parse(JSON.stringify(k));return Object.assign(e,t.options),{handler:n,options:e}}var N=new WeakMap,D=new WeakMap,L=new WeakMap,Y=new WeakMap,z=new WeakMap,J=new WeakMap,q=new WeakMap,F=new WeakMap,W=new WeakMap,V=new WeakMap,G=new WeakMap,H=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}(e,t);var n=a(e);function e(t,r,i){var u;o(this,e);var f=C(r),s=f.handler,a=f.options;return u=n.call(this),N.set(c(u),{writable:!0,value:"root"}),D.set(c(u),{writable:!0,value:""}),L.set(c(u),{writable:!0,value:void 0}),Y.set(c(u),{writable:!0,value:void 0}),z.set(c(u),{writable:!0,value:void 0}),J.set(c(u),{writable:!0,value:void 0}),q.set(c(u),{writable:!0,value:void 0}),F.set(c(u),{writable:!0,value:"init"}),W.set(c(u),{writable:!0,value:void 0}),V.set(c(u),{writable:!0,value:void 0}),G.set(c(u),{writable:!0,value:void 0}),p(c(u),q,s),p(c(u),G,a),p(c(u),Y,new Promise((function(t,n){p(c(u),z,t),p(c(u),J,n)}))),p(c(u),L,i),p(c(u),D,t),u}return f(e,[{key:j,get:function(){return d(this,L)}},{key:A,get:function(){return d(this,Y)}},{key:P,value:function(t){p(this,q,t)}},{key:T,value:function(){var t=this;p(this,Y,new Promise((function(n,e){p(t,z,n),p(t,J,e)}))),p(this,W,void 0),p(this,V,void 0),p(this,F,"init"),delete d(this,Y)[R]}},{key:O,set:function(t){p(this,N,t)}},{key:O,get:function(){return d(this,N)}},{key:M,value:function(){d(this,Y)[R]=!0,p(this,F,"impossible")}},{key:U,value:function(){delete d(this,Y)[R],p(this,F,"init")}},{key:"options",set:function(t){Object.assign(d(this,G),t)}},{key:"options",get:function(){return d(this,G)}},{key:"task",set:function(t){this[T](),this[P](t)}},{key:"task",get:function(){return d(this,q)}},{key:"finally",value:function(t){d(this,Y).finally(t)}},{key:E,get:function(){return""===d(this,D)?d(this,q).name:d(this,D)}},{key:S,value:function(){var t=this;"init"===d(this,F)&&(p(this,F,"pending"),d(this,q).call(this,d(this,z),d(this,J),this),d(this,Y).then((function(n){p(t,F,"resolved"),p(t,W,n),d(t,L)[Z](t),I(t)})).catch((function(n){p(t,F,"rejected"),p(t,V,n),d(t,L)[Z](t),I(t)})))}},{key:"rslt",get:function(){if("resolved"===d(this,F))return d(this,W);if("rejected"===d(this,F))throw $.rejected}},{key:"exception",get:function(){if("rejected"===d(this,F))return d(this,V);if("resolved"===d(this,F))throw $.resolved}},{key:"final",get:function(){return"resolved"===d(this,F)?d(this,W):"rejected"===d(this,F)?d(this,V):void 0}},{key:"state",get:function(){return d(this,F)}},{key:"is_settled",value:function(){return"pending"!==d(this,F)}},{key:"is_pending",value:function(){return"pending"===d(this,F)}},{key:"is_resolved",value:function(){return"resolved"===d(this,F)}},{key:"is_rejected",value:function(){return"rejected"===d(this,F)}},{key:"disconn",value:function(){this.$disconn()}},{key:"append_child",value:function(t,n){var r=new e(t,n=C(n),d(this,L));return r[O]="nonroot",this.$append_child(r),r}},{key:"insert_child",value:function(t,n,r){var i=new e(t,r=C(r),d(this,L));return i[O]="nonroot",this.$insert_child(n,i),i}}]),e}(y);g.add_repr(H,(function(t){return{promise:t[A],task:t[E]}}));var Z=Symbol("recv-from");function X(t){if("function"!=typeof t)throw $.must_set_controller}var K=new WeakMap,Q=new WeakMap,tt=new WeakMap,nt=new WeakMap,et=new WeakMap;i=Symbol.iterator;var rt=function(){function t(n,e){var r=this;o(this,t),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),X(n);var i=function(t){return t instanceof m?t.sdfs():w(t)}(e);p(this,K,function(t,n){var e=n[0],r=new Map,i=new H(e.key,e.val,t);r.set(e,i);for(var o=e.$sdfs_next();null!==o;){var u=o.$parent(),f=r.get(u).append_child(o.key,o.val);r.set(o,f),o=o.$sdfs_next()}return r=null,i}(this,i)),p(this,Q,new Promise((function(t,n){p(r,tt,t),p(r,nt,n)}))),p(this,et,n)}return f(t,[{key:"launch",value:function(){var t=this;if(B(d(this,K).$sdfs()))throw $.need_reset;d(this,K).$sdfs().forEach((function(t){return t[T]()})),p(this,Q,new Promise((function(n,e){p(t,tt,n),p(t,nt,e)}))),d(this,K)[S]()}},{key:"reset",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=d(this,K).$sdfs();if(n)e.forEach((function(t){return t[T]()})),p(this,Q,new Promise((function(n,e){p(t,tt,n),p(t,nt,e)})));else{var r=B(e);if(r)throw $.in_executing;e.forEach((function(t){return t[T]()})),p(this,Q,new Promise((function(n,e){p(t,tt,n),p(t,nt,e)})))}}},{key:"is_in_executing",value:function(){return B(d(this,K).$sdfs())}},{key:"check_state",value:function(){for(var t,n,e,r,i,o=d(this,K).$sdfs(),u=0;u<o.length;u++)console.log((t=o[u],n=void 0,e=void 0,r=void 0,i=void 0,e=t[E],r=t.state,i="    ".repeat(t.$depth()),n="resolved"===r?t.rslt:"rejected"===r?t.exception:"","".concat(i).concat(e,"[").concat(n,"] Promise { <").concat(r,"> } ")))}},{key:"exec_routes",get:function(){var t=d(this,K).$sdfs();return(t=(t=t.filter((function(t){return"impossible"!==t.state}))).filter((function(t){return t.$is_leaf()}))).map((function(t){var n=t.$ances(!0);return n.reverse(),n}))}},{key:i,value:function(){return d(this,K).$sdfs()[Symbol.iterator]()}},{key:Z,value:function(t,n){var e=d(this,K).$sdfs();0===e.filter((function(t){return"pending"===t.state||"init"===t.state})).length&&d(this,et).call(this,d(this,tt),d(this,nt),e)}},{key:"controller",get:function(){return d(this,Q)}},{key:"controller",set:function(t){var n=this,e=d(this,K).$sdfs();if(B(e))throw $.in_executing;X(t),e.forEach((function(t){return t[T]()})),p(this,Q,new Promise((function(t,e){p(n,tt,t),p(n,nt,e)}))),p(this,et,t)}},{key:"then",value:function(t){return d(this,Q).then((function(n){return t(n)}))}},{key:"catch",value:function(t){return d(this,Q).catch((function(n){return t(n)}))}},{key:"finally",value:function(t){return d(this,Q).finally((function(n){return t(n)}))}}]),t}();g.add_repr(rt,(function(t){return t.controller}));var it={handler:x,options:k};t.exports={FPromise:rt,ERROR_DICT:$,STATE_DICT:{init:"init",pending:"pending",resolved:"resolved",rejected:"rejected",impossible:"impossible",paused:"paused",stopped:"stopped"},DFLT_CFG:it},g.is_node()||(t.exports.Cfg=m)},function(t,n,e){(function(n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=v(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,o=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw o}}}}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,n,e){return n&&u(t.prototype,n),e&&u(t,e),t}function s(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)}function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=d(t);if(n){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return c(this,e)}}function c(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?h(t):n}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,n){if(t){if("string"==typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_(t,n):void 0}}function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var y=e(4),g=e(1),b=e(2),m=e(13).EventTarget,w=["_fstch","_lsib","_rsib","_parent","_tree"];function $(t){return void 0!==t._tree}function k(t){return t._tree===t}function x(t){return k(t)||!$(t)}function S(t){for(var n=t._fstch,e=n;null!==n;)e=n,n=n._rsib;return e}function E(t,n){for(var e=0,r=n._fstch;;){if(e===t)return r;if(null===r)return r;r=r._rsib,e+=1}}function O(t){for(var n=[],e=0,r=t._fstch,i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];for(;;){if(o.includes(e))n.push(r);else if(null===r)return n;r=r._rsib,e+=1}}function A(t){for(var n=[],e=t._fstch;;){if(null===e)return n;n.push(e),e=e._rsib,1}}function j(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t._rsib,r=t;null!==e;)r=e,e=e._rsib;return n||r!==t?r:null}function T(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=C(t);if(null===e)return n?t:null;var r=e._fstch;return n||r!==t?r:null}function P(t){for(var n=[],e=T(t,!0);null!==e;){if(e===t)return n;n.push(e),e=e._rsib}}function R(t){for(var n=[],e=t._rsib;null!==e;)n.push(e),e=e._rsib;return n}function M(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=P(t),r=R(t),i=[t];return sibs=n?e.concat(i,r):e.concat(r),sibs}function U(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=M(t,!0),o=i.filter((function(t,n){return e.includes(n)}));return o}function I(t){return P(t).length}function B(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t.$sibs(n);return e.length}function C(t){return j(t,!0)._parent}function N(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=[],r=t;for(n&&e.push(r),r=r.$parent();null!==r;)e.push(r),r=r.$parent();return e}function D(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=N(t,!0),o=i.filter((function(t,n){return e.includes(n)}));return o}function L(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=N(t,n);return e.length}function Y(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=V(t),r=G(t),i=r.indexOf(e);return n?r.slice(0,i+1):r.slice(1,i+1)}function z(t){for(var n=t.$depth(),e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=r.map((function(t){return t+n})),u=t.$deses(!1);u.map((function(t){return t.$depth()}));return u=u.filter((function(t){return o.includes(t.$depth())}))}function J(t,n){if(!x(n))return console.log("only root or uninited could be prepend"),n;var e=t.$is_leaf();if(n._tree=t._tree,n._lsib=null,e)n._rsib=null,n._parent=t;else{var r=t._fstch;r._lsib=void 0,n._rsib=r,n._parent=void 0}return t._fstch=n,n}function q(t,n){if(!x(n))return console.log("only root or uninited could be append"),n;var e=t.$is_leaf();if(n._tree=t._tree,n._rsib=null,e)t._fstch=n,n._lsib=null;else{var r=t.$lstch();r._parent=void 0,r._rsib=n,n._lsib=void 0}return n._parent=t,n}function F(t,n){if(!x(n))return console.log("only root or uninited could be add"),n;if(t.$is_root())return console.log("cant addrsib to root"),t;var e=t.$is_lstch();return n._tree=t._tree,e?(n._parent=t._parent,t._parent=void 0,n._rsib=null):(n._rsib=t._rsib,n._parent=void 0),t._rsib=n,n._lsib=void 0,n}function W(t,n,e){var r=A(n),i=r.length;if(0===i)e=J(n,e);else if(t<=i&&t>=0)if(0===t)e=J(n,e);else if(t===i)e=q(n,e);else{e=F(r[t-1],e)}else console.log("not in range!!");return e}function V(t){for(var n=t,e=t.$lstch();null!==e;)n=e,e=e.$lstch();return n}function G(t){var n=t.$depth();if(null===t)return[];var e=[t];for(t=t.$sdfs_next();null!==t&&t.$depth()>n;)e.push(t),t=t.$sdfs_next();return e}function H(t){var n=t.$visited;if(t.$is_leaf()){if(n){var e=t.$rsib();return null===e?t.$parent():e}return t.$visited=!0,t}if(n){var r=t.$rsib();return null===r?t.$parent():r}return t.$visited=!0,t.$fstch()}function Z(t,n){return n.$visited&&t===n}function X(t){!function(t){t.$sdfs().forEach((function(t){delete t.$visited}))}(t);for(var n=[],e=new Set,r=t;!Z(r,t);)e.has(t)?t.$close_at=n.length:(t.$open_at=n.length,e.add(t)),n.push(t),t=H(t);return r.$close_at=n.length,n.push(r),n.forEach((function(t){delete t.$visited})),n}function K(t){return t._lsib=null,t._rsib=null,t._parent=null,t}function Q(t){var n=t.$sdfs();return n.forEach((function(t){t._tree=n[0]})),n}function tt(t){if(t.$is_root())return t;if(t.$is_lonely()){!function(t){t._fstch=null}(t.$parent());Q(t);return K(t),t}if(t.$is_fstch()){t.$rsib()._lsib=null,t.$parent()._fstch=t._rsib;Q(t);return K(t),t}if(t.$is_lstch()){var n=t.$lsib();n._rsib=t._rsib,n._parent=t._parent;Q(t);return K(t),t}t.$lsib()._rsib=t._rsib;Q(t);return K(t),t}function nt(t){var n={};return n._nd=t,n._children=[],n}function et(t){var n=[],e=[nt(t[0])];e[0]._pbreadth=null;for(var r=function(){for(var t=[],r=function(r){e[r]._breadth=r,e[r]._depth=n.length;var i=e[r]._nd.$children();(i=i.map((function(t){return nt(t)}))).forEach((function(i,o){i._pbreadth=e[r]._breadth,e[r]._children.push([n.length+1,t.length+o])})),t=t.concat(i)},i=0;i<e.length;i++)r(i);var o=e;n.push(o),e=t};e.length>0;)r();return n}function rt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_children",e=t._nd,r={};for(var i in r[n]=[],r.$guid=e.$guid,e){var o=g.is_cu_property(i);o&&(r[i]=e[i])}return r}function it(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_children",e=t[0][0],r=rt(e,n),i=[{d:r,ele:e}];i.length>0;){for(var o=[],u=0;u<i.length;u++)for(var f=i[u],s=f.d,a=(f.ele,f.ele._children),l=a.map((function(n){return t[n[0]][n[1]]})),c=0;c<l.length;c++){var h=l[c],d=rt(h,n);s[n].push(d);var p={d:d,ele:h};o.push(p)}i=o}return r}function ot(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_children",e=new yt;for(var r in void 0!==t.$guid&&(e.$guid=t.$guid),t){var i=g.is_cu_property(r)&&n!==r;i&&(e[r]=t[r])}return e}function ut(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_children",e=ot(t,n),r=[{d:t,nd:e}];r.length>0;){for(var i=[],o=0;o<r.length;o++)for(var u=r[o].d,f=r[o].nd,s=void 0===u[n]?[]:u[n],a=0;a<s.length;a++){var l=s[a],c=ot(l,n);f.$append_child(c);var h={d:l,nd:c};i.push(h)}r=i}return e}function ft(t,n,e){var r=t.$depth();return"    ".repeat(r)+"["+e.indexOf(t)+"] : "+t.$guid}function st(t,n){var e=t.$depth(),r="    ".repeat(e),i="";return n===t.$open_at&&(i=r+"<"+t._id+" : "+t.$guid+">"),n===t.$close_at&&(i=r+"</"+t._id+" : "+t.$guid+">"),i}var at=function(t){s(e,t);var n=l(e);function e(){var t;return o(this,e),function(t){t._fstch=void 0,t._lsib=void 0,t._rsib=void 0,t._parent=void 0,t._tree=void 0,t.$guid=void 0,t._guid=void 0,t._id=void 0,t.$open_at=void 0,t.$close_at=void 0;for(var n=0,e=["_fstch","_lsib","_rsib","_parent","_tree","$guid","_guid","_id","$open_at","$close_at"];n<e.length;n++){var r=e[n];Object.defineProperty(t,r,{enumerable:!1})}}(h(t=n.call(this))),t._fstch=null,t.$guid=g.gen_guid(),t}return f(e,[{key:"$is_inited",value:function(){return $(this)}},{key:"$is_root",value:function(){return k(this)}},{key:"$is_fstch",value:function(){return null===this._lsib}},{key:"$is_lstch",value:function(){return null===this._rsib}},{key:"$is_leaf",value:function(){return null===this._fstch}},{key:"$is_lonely",value:function(){return 1===this.$sibs(!0).length}},{key:"$fstch",value:function(){return this._fstch}},{key:"$lstch",value:function(){return S(this)}},{key:"$which_child",value:function(t){return E(t,this)}},{key:"$some_children",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return O.apply(void 0,[this].concat(n))}},{key:"$children",value:function(){return A(this)}},{key:"$children_count",value:function(){return function(t){for(var n=0,e=t._fstch;;){if(null===e)return n;e=e._rsib,n+=1}}(this)}},{key:"$rsib",value:function(){return this._rsib}},{key:"$lsib",value:function(){return function(t){var n=T(t,!1);if(null===n)return null;for(var e=n;;){if(e._rsib===t)return e;e=e._rsib}}(this)}},{key:"$fstsib",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return T(this,t)}},{key:"$lstsib",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return j(this,t)}},{key:"$psibs",value:function(){return P(this)}},{key:"$fsibs",value:function(){return R(this)}},{key:"$which_sib",value:function(t){return function(t,n){for(var e=T(n,!0),r=0;;){if(null===e)return null;if(r==t)return e;e=e._rsib,r+=1}}(t,this)}},{key:"$some_sibs",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return U.apply(void 0,[this].concat(n))}},{key:"$sibseq",value:function(){return I(this)}},{key:"$sibs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return M(this,t)}},{key:"$sibs_count",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return B(this,t)}},{key:"$parent",value:function(){return C(this)}},{key:"$root",value:function(){return function(t){for(var n=t,e=t;null!==n;)e=n,n=n.$parent();return e}(this)}},{key:"$ances",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N(this,t)}},{key:"$which_ance",value:function(t){return function(t,n){for(var e=0,r=n;null!==r;){if(e===t)return r;r=r.$parent(),e+=1}return null}(t,this)}},{key:"$some_ances",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return D.apply(void 0,[this].concat(n))}},{key:"$ances_count",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return L(this,t)}},{key:"$prepend_child",value:function(t){return J(this,t=void 0===t?new e:t)}},{key:"$insert_child",value:function(t,n){return W(t,this,n=void 0===n?new e:n)}},{key:"$append_child",value:function(t){return q(this,t=void 0===t?new e:t)}},{key:"$clone",value:function(){if(k(this))return dt(_t(this));var t=I(this),n=C(this);tt(this);var e=dt(_t(this));return W(t,n,this),e}},{key:"$append_children",value:function(t,n){for(var r=[],i=0;i<t;i++){var o=void 0===n?new e:n.$clone();o=q(this,o),r.push(o)}return r}},{key:"$add_rsib",value:function(t){return F(this,t=void 0===t?new e:t)}},{key:"$add_lsib",value:function(t){return function(t,n){if(!x(n))return console.log("only root or uninited could be add"),n;if(t.$is_root())return console.log("cant addlsib to root"),t;var e=t.$is_fstch();if(n._tree=t._tree,e){var r=t.$parent();t._lsib=void 0,n._lsib=null,r._fstch=n}else{t.$lsib()._rsib=n,n._lsib=void 0}return n._rsib=t,n._parent=void 0,n}(this,t=void 0===t?new e:t)}},{key:"$rsib_of_fst_ance_having_rsib",value:function(){return function(t){for(var n=t.$parent();null!==n;){var e=n.$rsib();if(null!==e)return e;n=n.$parent()}return null}(this)}},{key:"$sdfs_next",value:function(){return function(t){var n=t.$fstch();if(null!==n)return n;var e=t.$rsib();return null!==e?e:t.$rsib_of_fst_ance_having_rsib()}(this)}},{key:"$drmost_des",value:function(){return V(this)}},{key:"$sdfs_prev",value:function(){return function(t){if(t.$is_root())return null;if(t.$is_leaf()){var n=t.$lsib();return null!==n?n:t.$parent()}var e=t.$lsib();return null!==e?e.$is_leaf()?e:e.$drmost_des():t.$parent()}(this)}},{key:"$sdfs",value:function(){return G(this)}},{key:"$dlmost_des",value:function(){return function(t){for(var n=t,e=t.$fstch();null!==e;)n=e,e=e.$fstch();return n}(this)}},{key:"$edfs_next",value:function(){return null===(n=(t=this).$rsib())?t.$parent():n.$dlmost_des();var t,n}},{key:"$lsib_of_fst_ance_having_lsib",value:function(){return function(t){for(var n=t.$parent();null!==n;){var e=n.$lsib();if(null!==e)return e;n=n.$parent()}return null}(this)}},{key:"$edfs_prev",value:function(){return function(t){if(t.$is_leaf()){var n=t.$lsib();return null===n?t.$lsib_of_fst_ance_having_lsib():n}return t.$lstch()}(this)}},{key:"$edfs",value:function(){return function(t){for(var n=[],e=t.$dlmost_des();null!==e&&(n.push(e),e!==t);)e=e.$edfs_next();return n}(this)}},{key:"$offset",value:function(){return function(t){var n,e=t.$root().$edfs();if(t.$is_leaf())n=e.indexOf(t);else{var r=t.$dlmost_des();n=e.indexOf(r)}return e=e.slice(0,n+1),offset=e.filter((function(t){return t.$is_leaf()})).length-1,offset}(this)}},{key:"$sedfs_next",value:function(){return H(this)}},{key:"$sedfs_prev",value:function(t){return function(t,n){if(n.$is_leaf()){if(t)return n;var e=n.$lsib();return null===e?n.$parent():e}if(t)return n.$lstch();var r=n.$lsib();return null===r?n.$parent():r}(this)}},{key:"$sedfs",value:function(){return X(this)}},{key:"$deses",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Y(this,t)}},{key:"$lst_lyr_deses",value:function(){return t=this.$deses(!1),n=t.map((function(t){return t.$depth()})),e=Math.max.apply(Math,p(n)),t=t.filter((function(t){return t.$depth()===e}));var t,n,e}},{key:"$which_lyr_deses",value:function(t){return function(t,n){var e=n.$depth(),r=n.$deses(!1);return r.map((function(t){return t.$depth()})),r=r.filter((function(n){return n.$depth()===e+t}))}(t,this)}},{key:"$some_lyrs_deses",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return z.apply(void 0,[this].concat(n))}},{key:"$count",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Y(this,t).length}},{key:"$depth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N(this,t).length}},{key:"$height",value:function(){var t=this.$depth(),n=this.$sdfs().map((function(t){return t.$depth()}));return Math.max.apply(Math,p(n))-t+1}},{key:"$pbreadth",value:function(){return null===(t=this.$parent())?null:t.$breadth();var t}},{key:"$breadth",value:function(){return(t=this).$lyr().indexOf(t);var t}},{key:"$width",value:function(){return function(t){var n=t.$sdfs();return(n=n.filter((function(t){return t.$is_leaf()}))).length}(this)}},{key:"$lyr",value:function(){return function(t){var n=t.$root().$sdfs(),e=t.$depth();return n.filter((function(t){return t.$depth()===e}))}(this)}},{key:"$lcin",value:function(){return n=(t=this).$luncle(),t.$is_fstch()?null===n?null:n.$lstch():null;var t,n}},{key:"$rcin",value:function(){return n=(t=this).$runcle(),t.$is_lstch()?null===n?null:n.$fstch():null;var t,n}},{key:"$luncle",value:function(){return null===(t=this.$parent())?null:t.$lsib();var t}},{key:"$runcle",value:function(){return null===(t=this.$parent())?null:t.$rsib();var t}},{key:"$sdfs_repr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this.$root(),r=G(e),i=G(this),o=i.map((function(n,e){return t(n,e,r)})),u=o.join("\n");if(console.log(u),n)return u}},{key:"$sedfs_repr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this.$root();lt(e);var r=X(this),i=r.map((function(n,e){return t(n,e)})),o=i.join("\n");if(console.log(o),n)return o}},{key:"$disconn",value:function(){return tt(this)}},{key:"$rm_fstch",value:function(){return tt(this._fstch)}},{key:"$rm_lstch",value:function(){return tt(S(this))}},{key:"$rm_which",value:function(t){return tt(E(t,this))}},{key:"$rm_some_children",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=O.apply(void 0,[this].concat(n));return r.map((function(t){return tt(t)}))}},{key:"$rm_all_children",value:function(){return A(this).map((function(t){return tt(t)}))}},{key:"$dump",value:function(){if(this.$is_root())return _t(this);console.log("only root !!!")}},{key:"$dump2file",value:function(t){if(this.$is_root()){var n=_t(this);y.wjson(t,n)}else console.log("only root !!!")}},{key:"$sdfs2mat",value:function(){return et(G(this))}},{key:"$nest_dict",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_children",n=et(G(this)),e=it(n,t);return e}},{key:"$index",value:function(){return this.$sibseq()}},{key:"$sdfs_index",value:function(){return this.$root().$sdfs().indexOf(this)}}]),e}(m);function lt(t){var n=G(t);return n.forEach((function(t,n){t._id=n})),n}function ct(t,n){for(;n._id!==t;)n=n._parent;return n}function ht(t,n){var e,r=i(vt(n));try{for(r.s();!(e=r.n()).done;){var o=e.value;t[o]=n[o]}}catch(t){r.e(t)}finally{r.f()}return t}function dt(t){for(var n,e=g.dict_keys(t)[0],r=b.get_root(t[e],t),i=function(t){var n=new yt;return n._id=t._id,n.$guid=t._guid,n}(r),o=i=ht(i,r),u=r,f=b.get_sdfs_next(u,t);null!==f;)if(u._fstch===f._id)(n=o.$prepend_child())._id=f._id,n.$guid=f._guid,o=n=ht(n,f),u=f,f=b.get_sdfs_next(u,t);else if(u._rsib===f._id)(n=o.$add_rsib())._id=f._id,n.$guid=f._guid,o=n=ht(n,f),u=f,f=b.get_sdfs_next(u,t);else if(null!==f._parent&&void 0!==f._parent){(n=(o=ct(f._parent,o)).$append_child())._id=f._id,n.$guid=f._guid,o=n=ht(n,f),u=f,f=b.get_sdfs_next(u,t)}else if(void 0===f._parent){(n=(o=ct(b.get_parent(f,t)._id,o)).$append_child())._id=f._id,n.$guid=f._guid,o=n=ht(n,f),u=f,f=b.get_sdfs_next(u,t)}else console.log("Impossible",o,u,f);return i}function pt(t,n){return null===t[n]?null:void 0===t[n]?void 0:t[n]._id}function vt(t){return g.dict_keys(t).filter((function(t){return!w.includes(t)}))}function _t(t){var n=lt(t),e=t._id,r={};return n.forEach((function(t,n){var o={};o._tree=e,o._fstch=pt(t,"_fstch"),o._lsib=pt(t,"_lsib"),o._rsib=pt(t,"_rsib"),o._parent=pt(t,"_parent"),o._id=t._id,o._guid=t.$guid,o=function(t,n){var e,r=i(vt(t));try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=t[o]}}catch(t){r.e(t)}finally{r.f()}return n}(t,o),r[t._id]=o})),r}Object.defineProperty(at,"name",{value:"‍"});var yt=function(t){s(e,t);var n=l(e);function e(){var t;return o(this,e),(t=n.call(this))._fstch=null,t._lsib=null,t._rsib=null,t._parent=null,t._tree=h(t),t}return f(e,[{key:"$is_parent_of",value:function(t){return t.$parent()===this}},{key:"$is_root_of",value:function(t){return t.$root()===this}},{key:"$is_descendant_of",value:function(t){return t.$deses(!1).indexOf(this)>=0}},{key:"$is_inclusive_descendant_of",value:function(t){return t.$deses(!0).indexOf(this)>=0}},{key:"$is_ancestor_of",value:function(t){return t.$ances(!1).indexOf(this)>=0}},{key:"$is_inclusive_ancestor_of",value:function(t){return t.$ances(!0).indexOf(this)>=0}},{key:"$is_sibling_of",value:function(t){return t.$sibs(!1).indexOf(this)>=0}},{key:"$is_inclusive_siblings_of",value:function(t){return t.$sibs(!0).indexOf(this)>=0}},{key:"$is_preceding_of",value:function(t){var n=t.$sdfs(),e=n.indexOf(t),r=n.indexof(this);return r>=0&&r<e}},{key:"$is_following_of",value:function(t){var n=t.$sdfs(),e=n.indexOf(t);return n.indexof(this)>e}},{key:"$is_first_child_of",value:function(t){return this===t.$fstch()}},{key:"$is_child_of",value:function(t){return t.$children().indexOf(this)>=0}},{key:"$is_last_child_of",value:function(t){return this===t.$lstch()}},{key:"$is_previous_sibling_of",value:function(t){return this===t.$lsib()}},{key:"$is_next_sibling_of",value:function(t){return this===t.$rsib()}},{key:"$index",value:function(){return this.$sibseq()}},{key:"$sdfs_index",value:function(){return this.$root().$sdfs().indexOf(this)}}]),e}(at);function gt(t){return"string"==typeof t?dt(y.rjson(t)):"object"===r(t)?dt(t):new yt}function bt(t,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var u=e.apply(void 0,[t].concat(i));return u=new n.from(u).toString("base64")}function mt(t){var n=t.$ances(!0).map((function(t){return t.$children().length}));return n=n.join("-")}function wt(t){return t.$pbreadth()+"-"+t.$breadth()+"-"+t.$depth()}function $t(t,n){var e=mt(t);if(n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];out=bt.apply(void 0,[t,n].concat(i)),e=e+"@"+out}return e}function kt(t,n){var e=wt(t);if(n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];out=bt.apply(void 0,[t,n].concat(i)),e=e+"@"+out}return e}function xt(t,n,e,r,i){for(var o=arguments.length,u=new Array(o>5?o-5:0),f=5;f<o;f++)u[f-5]=arguments[f];var s=e.$sdfs(),a=r.$sdfs();if(s.length!==a.length)return!1;var l=s.map((function(t){return n.apply(void 0,[t,i].concat(u))})),c=a.map((function(t){return n.apply(void 0,[t,i].concat(u))}));t&&(l.sort(),c.sort());for(var h=0;h<l.length;h++){var d=l[h],p=c[h];if(d!==p)return!1}return!0}Object.defineProperty(yt,"name",{value:"‍"}),t.exports={Node:at,Tree:yt,Root:yt,load:gt,load_from_nest_dict:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_children";return ut(t,n)},clone:function(t){return t.$dump(),gt(ndict)},get_cu_sign:bt,get_internal_sign_ignore_order:mt,get_internal_sign_keep_order:wt,get_sign_keep_order:kt,struct_eq:xt,struct_eq_keep_order:function(t,n,e){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return xt.apply(void 0,[!1,kt,t,n,e].concat(i))},get_sign_ignore_order:$t,struct_eq_ignore_order:function(t,n,e){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return xt.apply(void 0,[!0,$t,t,n,e].concat(i))}}}).call(this,e(9).Buffer)},function(t,n,e){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=e(10),i=e(11),o=e(12);function u(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(t,n){if(u()<n)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=s.prototype:(null===t&&(t=new s(n)),t.length=n),t}function s(t,n,e){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,n,e);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,n,e)}function a(t,n,e,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?function(t,n,e,r){if(n.byteLength,e<0||n.byteLength<e)throw new RangeError("'offset' is out of bounds");if(n.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");n=void 0===e&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,e):new Uint8Array(n,e,r);s.TYPED_ARRAY_SUPPORT?(t=n).__proto__=s.prototype:t=h(t,n);return t}(t,n,e,r):"string"==typeof n?function(t,n,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(n,e),i=(t=f(t,r)).write(n,e);i!==r&&(t=t.slice(0,i));return t}(t,n,e):function(t,n){if(s.isBuffer(n)){var e=0|d(n.length);return 0===(t=f(t,e)).length||n.copy(t,0,0,e),t}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(r=n.length)!=r?f(t,0):h(t,n);if("Buffer"===n.type&&o(n.data))return h(t,n.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,n)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,n){if(l(n),t=f(t,n<0?0:0|d(n)),!s.TYPED_ARRAY_SUPPORT)for(var e=0;e<n;++e)t[e]=0;return t}function h(t,n){var e=n.length<0?0:0|d(n.length);t=f(t,e);for(var r=0;r<e;r+=1)t[r]=255&n[r];return t}function d(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function p(t,n){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Y(t).length;default:if(r)return L(t).length;n=(""+n).toLowerCase(),r=!0}}function v(t,n,e){var r=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(n>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,n,e);case"utf8":case"utf-8":return E(this,n,e);case"ascii":return O(this,n,e);case"latin1":case"binary":return A(this,n,e);case"base64":return S(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function y(t,n,e,r,i){if(0===t.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof n&&(n=s.from(n,r)),s.isBuffer(n))return 0===n.length?-1:g(t,n,e,r,i);if("number"==typeof n)return n&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,n,e):Uint8Array.prototype.lastIndexOf.call(t,n,e):g(t,[n],e,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,n,e,r,i){var o,u=1,f=t.length,s=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;u=2,f/=2,s/=2,e/=2}function a(t,n){return 1===u?t[n]:t.readUInt16BE(n*u)}if(i){var l=-1;for(o=e;o<f;o++)if(a(t,o)===a(n,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*u}else-1!==l&&(o-=o-l),l=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,h=0;h<s;h++)if(a(t,o+h)!==a(n,h)){c=!1;break}if(c)return o}return-1}function b(t,n,e,r){e=Number(e)||0;var i=t.length-e;r?(r=Number(r))>i&&(r=i):r=i;var o=n.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var u=0;u<r;++u){var f=parseInt(n.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,n,e,r){return z(L(n,t.length-e),t,e,r)}function w(t,n,e,r){return z(function(t){for(var n=[],e=0;e<t.length;++e)n.push(255&t.charCodeAt(e));return n}(n),t,e,r)}function $(t,n,e,r){return w(t,n,e,r)}function k(t,n,e,r){return z(Y(n),t,e,r)}function x(t,n,e,r){return z(function(t,n){for(var e,r,i,o=[],u=0;u<t.length&&!((n-=2)<0);++u)e=t.charCodeAt(u),r=e>>8,i=e%256,o.push(i),o.push(r);return o}(n,t.length-e),t,e,r)}function S(t,n,e){return 0===n&&e===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(n,e))}function E(t,n,e){e=Math.min(t.length,e);for(var r=[],i=n;i<e;){var o,u,f,s,a=t[i],l=null,c=a>239?4:a>223?3:a>191?2:1;if(i+c<=e)switch(c){case 1:a<128&&(l=a);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&a)<<6|63&o)>127&&(l=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&a)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&a)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(l=s)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var n=t.length;if(n<=4096)return String.fromCharCode.apply(String,t);var e="",r=0;for(;r<n;)e+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return e}(r)}n.Buffer=s,n.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=u(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,n,e){return a(null,t,n,e)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,n,e){return function(t,n,e,r){return l(n),n<=0?f(t,n):void 0!==e?"string"==typeof r?f(t,n).fill(e,r):f(t,n).fill(e):f(t,n)}(null,t,n,e)},s.allocUnsafe=function(t){return c(null,t)},s.allocUnsafeSlow=function(t){return c(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,n){if(!s.isBuffer(t)||!s.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var e=t.length,r=n.length,i=0,o=Math.min(e,r);i<o;++i)if(t[i]!==n[i]){e=t[i],r=n[i];break}return e<r?-1:r<e?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,n){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var e;if(void 0===n)for(n=0,e=0;e<t.length;++e)n+=t[e].length;var r=s.allocUnsafe(n),i=0;for(e=0;e<t.length;++e){var u=t[e];if(!s.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(r,i),i+=u.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)_(this,n,n+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)_(this,n,n+3),_(this,n+1,n+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)_(this,n,n+7),_(this,n+1,n+6),_(this,n+2,n+5),_(this,n+3,n+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,n,e,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===e&&(e=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),n<0||e>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&n>=e)return 0;if(r>=i)return-1;if(n>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),u=(e>>>=0)-(n>>>=0),f=Math.min(o,u),a=this.slice(r,i),l=t.slice(n,e),c=0;c<f;++c)if(a[c]!==l[c]){o=a[c],u=l[c];break}return o<u?-1:u<o?1:0},s.prototype.includes=function(t,n,e){return-1!==this.indexOf(t,n,e)},s.prototype.indexOf=function(t,n,e){return y(this,t,n,e,!0)},s.prototype.lastIndexOf=function(t,n,e){return y(this,t,n,e,!1)},s.prototype.write=function(t,n,e,r){if(void 0===n)r="utf8",e=this.length,n=0;else if(void 0===e&&"string"==typeof n)r=n,e=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(e)?(e|=0,void 0===r&&(r="utf8")):(r=e,e=void 0)}var i=this.length-n;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,n,e);case"utf8":case"utf-8":return m(this,t,n,e);case"ascii":return w(this,t,n,e);case"latin1":case"binary":return $(this,t,n,e);case"base64":return k(this,t,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n,e);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;i<e;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;i<e;++i)r+=String.fromCharCode(t[i]);return r}function j(t,n,e){var r=t.length;(!n||n<0)&&(n=0),(!e||e<0||e>r)&&(e=r);for(var i="",o=n;o<e;++o)i+=D(t[o]);return i}function T(t,n,e){for(var r=t.slice(n,e),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,n,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}function R(t,n,e,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<o)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}function M(t,n,e,r){n<0&&(n=65535+n+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(n&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,n,e,r){n<0&&(n=4294967295+n+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=n>>>8*(r?i:3-i)&255}function I(t,n,e,r,i,o){if(e+r>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function B(t,n,e,r,o){return o||I(t,0,e,4),i.write(t,n,e,r,23,4),e+4}function C(t,n,e,r,o){return o||I(t,0,e,8),i.write(t,n,e,r,52,8),e+8}s.prototype.slice=function(t,n){var e,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t),s.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,n)).__proto__=s.prototype;else{var i=n-t;e=new s(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},s.prototype.readUIntLE=function(t,n,e){t|=0,n|=0,e||P(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,n,e){t|=0,n|=0,e||P(t,n,this.length);for(var r=this[t+--n],i=1;n>0&&(i*=256);)r+=this[t+--n]*i;return r},s.prototype.readUInt8=function(t,n){return n||P(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,n){return n||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,n){return n||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,n){return n||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,n){return n||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,n,e){t|=0,n|=0,e||P(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*n)),r},s.prototype.readIntBE=function(t,n,e){t|=0,n|=0,e||P(t,n,this.length);for(var r=n,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*n)),o},s.prototype.readInt8=function(t,n){return n||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,n){n||P(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},s.prototype.readInt16BE=function(t,n){n||P(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},s.prototype.readInt32LE=function(t,n){return n||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,n){return n||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,n){return n||P(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,n){return n||P(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,n){return n||P(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,n){return n||P(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,n,e,r){(t=+t,n|=0,e|=0,r)||R(this,t,n,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[n]=255&t;++o<e&&(i*=256);)this[n+o]=t/i&255;return n+e},s.prototype.writeUIntBE=function(t,n,e,r){(t=+t,n|=0,e|=0,r)||R(this,t,n,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[n+i]=255&t;--i>=0&&(o*=256);)this[n+i]=t/o&255;return n+e},s.prototype.writeUInt8=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},s.prototype.writeUInt16LE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):M(this,t,n,!0),n+2},s.prototype.writeUInt16BE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):M(this,t,n,!1),n+2},s.prototype.writeUInt32LE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):U(this,t,n,!0),n+4},s.prototype.writeUInt32BE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):U(this,t,n,!1),n+4},s.prototype.writeIntLE=function(t,n,e,r){if(t=+t,n|=0,!r){var i=Math.pow(2,8*e-1);R(this,t,n,e,i-1,-i)}var o=0,u=1,f=0;for(this[n]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[n+o-1]&&(f=1),this[n+o]=(t/u>>0)-f&255;return n+e},s.prototype.writeIntBE=function(t,n,e,r){if(t=+t,n|=0,!r){var i=Math.pow(2,8*e-1);R(this,t,n,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[n+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[n+o+1]&&(f=1),this[n+o]=(t/u>>0)-f&255;return n+e},s.prototype.writeInt8=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},s.prototype.writeInt16LE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):M(this,t,n,!0),n+2},s.prototype.writeInt16BE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):M(this,t,n,!1),n+2},s.prototype.writeInt32LE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):U(this,t,n,!0),n+4},s.prototype.writeInt32BE=function(t,n,e){return t=+t,n|=0,e||R(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):U(this,t,n,!1),n+4},s.prototype.writeFloatLE=function(t,n,e){return B(this,t,n,!0,e)},s.prototype.writeFloatBE=function(t,n,e){return B(this,t,n,!1,e)},s.prototype.writeDoubleLE=function(t,n,e){return C(this,t,n,!0,e)},s.prototype.writeDoubleBE=function(t,n,e){return C(this,t,n,!1,e)},s.prototype.copy=function(t,n,e,r){if(e||(e=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<e&&(r=e),r===e)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-e&&(r=t.length-n+e);var i,o=r-e;if(this===t&&e<n&&n<r)for(i=o-1;i>=0;--i)t[i+n]=this[i+e];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+n]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),n);return o},s.prototype.fill=function(t,n,e,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,e=this.length):"string"==typeof e&&(r=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<e)throw new RangeError("Out of range index");if(e<=n)return this;var o;if(n>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=n;o<e;++o)this[o]=t;else{var u=s.isBuffer(t)?t:L(new s(t,r).toString()),f=u.length;for(o=0;o<e-n;++o)this[o+n]=u[o%f]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,n){var e;n=n||1/0;for(var r=t.length,i=null,o=[],u=0;u<r;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(n-=3)>-1&&o.push(239,191,189);continue}if(u+1===r){(n-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(n-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(n-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((n-=1)<0)break;o.push(e)}else if(e<2048){if((n-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((n-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function Y(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,n,e,r){for(var i=0;i<r&&!(i+e>=n.length||i>=t.length);++i)n[i+e]=t[i];return i}}).call(this,e(3))},function(t,n,e){"use strict";n.byteLength=function(t){var n=a(t),e=n[0],r=n[1];return 3*(e+r)/4-r},n.toByteArray=function(t){var n,e,r=a(t),u=r[0],f=r[1],s=new o(function(t,n,e){return 3*(n+e)/4-e}(0,u,f)),l=0,c=f>0?u-4:u;for(e=0;e<c;e+=4)n=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[l++]=n>>16&255,s[l++]=n>>8&255,s[l++]=255&n;2===f&&(n=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[l++]=255&n);1===f&&(n=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[l++]=n>>8&255,s[l++]=255&n);return s},n.fromByteArray=function(t){for(var n,e=t.length,i=e%3,o=[],u=0,f=e-i;u<f;u+=16383)o.push(l(t,u,u+16383>f?f:u+16383));1===i?(n=t[e-1],o.push(r[n>>2]+r[n<<4&63]+"==")):2===i&&(n=(t[e-2]<<8)+t[e-1],o.push(r[n>>10]+r[n>>4&63]+r[n<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,s=u.length;f<s;++f)r[f]=u[f],i[u.charCodeAt(f)]=f;function a(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=n),[e,e===n?0:4-e%4]}function l(t,n,e){for(var i,o,u=[],f=n;f<e;f+=3)i=(t[f]<<16&16711680)+(t[f+1]<<8&65280)+(255&t[f+2]),u.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return u.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,n){n.read=function(t,n,e,r,i){var o,u,f=8*i-r-1,s=(1<<f)-1,a=s>>1,l=-7,c=e?i-1:0,h=e?-1:1,d=t[n+c];for(c+=h,o=d&(1<<-l)-1,d>>=-l,l+=f;l>0;o=256*o+t[n+c],c+=h,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=r;l>0;u=256*u+t[n+c],c+=h,l-=8);if(0===o)o=1-a;else{if(o===s)return u?NaN:1/0*(d?-1:1);u+=Math.pow(2,r),o-=a}return(d?-1:1)*u*Math.pow(2,o-r)},n.write=function(t,n,e,r,i,o){var u,f,s,a=8*o-i-1,l=(1<<a)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(f=isNaN(n)?1:0,u=l):(u=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-u))<1&&(u--,s*=2),(n+=u+c>=1?h/s:h*Math.pow(2,1-c))*s>=2&&(u++,s/=2),u+c>=l?(f=0,u=l):u+c>=1?(f=(n*s-1)*Math.pow(2,i),u+=c):(f=n*Math.pow(2,c-1)*Math.pow(2,i),u=0));i>=8;t[e+d]=255&f,d+=p,f/=256,i-=8);for(u=u<<i|f,a+=i;a>0;t[e+d]=255&u,d+=p,u/=256,a-=8);t[e+d-p]|=128*v}},function(t,n){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){i(this,t)}return r(t,[{key:"addEventListener",value:function(t,n){}},{key:"removeEventListener",value:function(t,n){}},{key:"dispatchEvent",value:function(t){}}]),t}();t.exports={EventTarget:o}},function(t,n,e){var r=e(2),i=e(1),o={t:"├── ",v:"│   ",l:"└── ",ws:"    "},u={t:"├── ",v:"│   ",l:"┌── ",ws:"    "};function f(t){return"t"===t||"v"===t?"v":"ws"}function s(t,n){return(t=t.map((function(t){return n[t]}))).join("")}function a(t){for(var n in t)delete t[n]._ui}function l(t,n){if(t._ui={},r.is_root(t))t._ui.conns=[],t._ui.display=!0;else{var e=r.get_parent(t,n)._ui.conns.map((function(t){return f(t)}));r.is_lstch(t)?e.push("l"):e.push("t"),t._ui.conns=e,t._ui.display=!0}return t}function c(t,n,e){var i=r.get_depth(t,n),u=r.get_deses(t,n,!0),f=(u=u.map((function(t){return l(t,n)}))).map((function(t){return t._ui.conns})),a=(f=(f=f.map((function(t){return t.slice(i)}))).map((function(t){return s(t,o)}))).map((function(t,n){return t+"["+u[n]._id+"] : "+u[n]._guid}));return a=a.filter((function(t,n){return!0===u[n]._ui.display}))}function h(t,n){if(t._ui={},r.is_root(t))t._ui.conns=[];else{var e=r.get_parent(t,n)._ui.conns.map((function(t){return f(t)}));r.is_fstch(t)?e.push("l"):e.push("t"),t._ui.conns=e}return t}function d(t,n,e){var i=r.get_depth(t,n),o=r.get_edfs(t,n);o.reverse(),(o=o.map((function(t){return h(t,n)}))).reverse();var f=r.get_deses(t,n,!0).map((function(t){return t._id})),a=(o=o.filter((function(t){return f.includes(t._id)}))).map((function(t){return t._ui.conns}));return(a=(a=a.map((function(t){return t.slice(i,t.length)}))).map((function(t){return s(t,u)}))).map((function(t,n){return t+o[n]._id}))}var p={indent:"    ",stag_prefix:"<",stag_suffix:">",etag_prefix:"</",etag_suffix:">"};function v(t,n,e){return n+t+e}t.exports={dflt_calc_conn_map_func:f,conns2repr:s,clear_ui:a,dflt_sdfs_show_connd:o,dflt_sdfs_calc_conns:l,get_sdfs_repr_arr:c,sdfs_show_all:function(t,n){var e=r.get_root(t,n);c(e,n);var i=c(t,n),o=i.join("\n");console.log(o),a(n)},sdfs_show_root_tree:function(t){var n=i.dict_keys(t)[0],e=r.get_root(t[n],t),o=c(e,t),u=o.join("\n");console.log(u),a(t)},sdfs_show_from:function(t,n,e){var i=r.get_root(t,n);c(i,n);var o=c(t,n),u=(o=o.slice(e)).join("\n");console.log(u),a(n)},sdfs_show_to:function(t,n,e){var i=r.get_root(t,n);c(i,n);var o=c(t,n),u=(o=o.slice(0,e)).join("\n");console.log(u),a(n)},sdfs_show_from_to:function(t,n,e,i){var o=r.get_root(t,n);c(o,n);var u=c(t,n),f=(u=u.slice(e,i)).join("\n");console.log(f),a(n)},sdfs_expand:function(t,n){var e=r.get_deses(t,n,!1);return e.forEach((function(t){t._ui.display=!0})),n},sdfs_foldup:function(t,n){var e=r.get_deses(t,n,!1);return e.forEach((function(t){t._ui.display=!1})),n},dflt_edfs_show_connd:u,dflt_edfs_calc_conns:h,get_edfs_repr_arr:d,edfs_show_all:function(t,n){var e=r.get_root(t,n);d(e,n);var i=d(t,n),o=i.join("\n");console.log(o),a(n)},edfs_show_root_tree:function(t){var n=i.dict_keys(t)[0],e=r.get_root(t[n],t),o=d(e,t),u=o.join("\n");console.log(u),a(t)},edfs_show_from:function(t,n,e){r.get_root(t,n),d(t,n);var i=d(t,n),o=(i=i.slice(0,i.length-e)).join("\n");console.log(o),a(n)},edfs_show_to:function(t,n,e){r.get_root(t,n),d(t,n);var i=d(t,n),o=(i=i.slice(i.length-e,i.length)).join("\n");console.log(o),a(n)},edfs_show_from_to:function(t,n,e,i){r.get_root(t,n),d(t,n);var o=d(t,n),u=(o=o.slice(o.length-i,o.length-e)).join("\n");console.log(u),a(n)},dflt_sedfs_show_connd:p,gen_tag:v,sedfs_show_all:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,i=r.get_sedfs(t,n,!0),o=i.map((function(t){return r.get_depth(t,n)})),u=r.get_depth(t,n),f=o.map((function(t){return e.indent.repeat(t-u)})),s=i.map((function(t){return!1===t._$visited?v(t._id,e.stag_prefix,e.stag_suffix):v(t._id,e.etag_prefix,e.etag_suffix)})),a=s.map((function(t,n){return f[n]+t})),l=a.join("\n");console.log(l)}}},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function f(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,a=[],l=!1,c=-1;function h(){l&&s&&(l=!1,s.length?a=s.concat(a):c=-1,a.length&&d())}function d(){if(!l){var t=f(h);l=!0;for(var n=a.length;n;){for(s=a,a=[];++c<n;)s&&s[c].run();c=-1,n=a.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function p(t,n){this.fun=t,this.array=n}function v(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];a.push(new p(t,n)),1!==a.length||l||f(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&"object"===e(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){var r;function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,n){var e=n.get(t);if(!e)throw new TypeError("attempted to get private field on non-instance");return e.get?e.get.call(t):e.value}function u(t,n,e){var r=n.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,e);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=e}return e}var f=e(5).add_repr,s=e(19),a=s.jobj2tree,l=s.flatten_to_entries,c=s.flatten_to_dot_dict,h=s.get_val_via_pl;function d(t,n){var e=t.$sdfs();return e.forEach((function(t){var e=function(t){var n=t.$ances(!0);n.reverse();var e=n.map((function(t){return t.key}));return(e=e.slice(1)).join(".")}(t);t.val=n[e]})),e}var p=Symbol("get-data"),v=Symbol("set-data"),_={get:function(t,n,e){var r;return t.hasOwnProperty(n)?r=Reflect.get(t,n):(r=new m,Reflect.set(t,n,r)),new Proxy(r,_)},set:function(t,n,e,r){Reflect.get(t,n)[v](e)}},y=new WeakMap,g=new WeakMap,b=new WeakMap;r=Symbol.toStringTag;var m=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),y.set(this,{writable:!0,value:null}),g.set(this,{writable:!0,value:_}),b.set(this,{writable:!0,value:void 0}),u(this,b,new Proxy(this,o(this,g)))}var n,e,f;return n=t,(e=[{key:"$$",get:function(){return o(this,b)}},{key:v,value:function(t){u(this,y,t)}},{key:p,value:function(){return o(this,y)}},{key:"relation",value:function(){return JSON.parse(JSON.stringify(this,null,4))}},{key:"data",value:function(){var t=this,n=c(this.relation());return delete n[""],Object.keys(n).forEach((function(e){var r,i,o=(r=t,i=e.split("."),h(i,r));n[e]=o[p]()})),n}},{key:"json",value:function(){return{relation:this.relation(),data:this.data()}}},{key:"dump",value:function(){var t=this.json();for(var n in t.data){var e=t.data[n];"function"==typeof e&&(t.data[n]=e.toString())}return JSON.stringify(t,null,4)}},{key:"show",value:function(){console.log(this.dump())}},{key:r,get:function(){return o(this,y).toString()}},{key:"tree",value:function(){return d(a(this.relation()).$fstch(),this.data())[0]}},{key:"sdfs",value:function(){var t=d(a(this.relation()).$fstch(),this.data());return t}}])&&i(n.prototype,e),f&&i(n,f),t}();f(m,(function(t){return t.json()})),t.exports={Cfg:m,load_to_sdfs:function(t){var n=t.data;return d(a(t.relation).$fstch(),n)},load:function(t){var n=new m,e=t.data,r=t.relation,i=l(r).map((function(t){return JSON.parse(t[0])}));return(i=i.slice(1)).forEach((function(t){var r=e[t.join(".")];!function(t,n,e){var r,i=t.$$;for(r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]],i[n[n.length-1]]=e}(n,t,r)})),n}}},function(t,n,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=e(0).ndcls,o=e(0).ndcls.Tree,u=e(6);function f(t){return t instanceof Array?"arr":u.isPrimitive(t)?null===t?null:r(t):"dict"}function s(t){return"arr"!==t&&"dict"!==t}function a(t){if(t instanceof Array)return{kl:t.map((function(t,n){return n})),vl:t};if(u.isPrimitive(t))return{vl:[]};var n=Object.entries(t);return{kl:n.map((function(t){return t[0]})),vl:n.map((function(t){return t[1]}))}}function l(t){var n=new o;for(n.type=f(t),n.key=null,n.val=t,unhandled=[{obj:t,nd:n}];unhandled.length>0;){next_unhandled=[];for(var e=0;e<unhandled.length;e++)for(var r=unhandled[e].obj,i=unhandled[e].nd,u=a(r),s=u.kl,l=u.vl,c=0;c<l.length;c++){var h=i.$append_child();h.type=f(l[c]),h.key=s[c],h.val=l[c];var d={obj:l[c],nd:h};next_unhandled.push(d)}unhandled=next_unhandled}return n}function c(t){return t.$ances(including_self=!0).map((function(t){return t.key})).reverse().slice(1)}function h(t){var n=c(t);return JSON.stringify(n)}function d(t){var n=l(t).$sdfs(),e=n.map((function(t){return h(t)})),r=n.map((function(t){return"dict"===t.type?{}:"arr"===t.type?[]:t.val}));return e.map((function(t,n){return[t,r[n]]}))}function p(t){return!((t=t.toString()).indexOf(".")>=0)}function v(t){return t.every((function(t){return p(t)}))}function _(t){for(var n=[],e=0;e<t.length;e++){var r=t[e],i=JSON.parse(r[0]);if(!v(i))throw r[0]+" have dot in it !! ";n.push([i.join("."),r[1]])}return n}function y(t){return t.every((function(t){return p(t)}))}function g(t){return _(d(t))}function b(t,n,e){for(var r=0;r<t.length-1;r++)e=e[t[r]];return e[t[t.length-1]]=n,e}function m(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=(t=n?JSON.parse(JSON.stringify(t)):t)[0][1],r=1;r<t.length;r++){var i=JSON.parse(t[r][0]),o=t[r][1];b(i,o,e)}return e}function w(t){return t=t.sort((function(t,n){return t[0].length-n[0].length}))}function $(t){return s(t.type)?t.val:"dict"===t.type?{}:[]}function k(t){return"arr"===f(t)?Object.fromEntries(Object.entries(t)):t}function x(t){var n=t.type;return"dict"===n||"arr"===n||(n="other"),n}function S(t){return t.type}function E(t){for(var n=t.$sdfs().map((function(t){return[c(t),$(t)]})),e=(n=n.map((function(t){return[t[0],(n=t[1],n instanceof Array?n:u.isPrimitive(n)?null===n?null:r(n):n)];var n})))[0][1],i=1;i<n.length;i++){b(n[i][0],n[i][1],e)}return e}function O(t){return s(t.type)?t.val:[]}function A(t,n){var e=n.filter((function(t){return t instanceof Array})),r=t.filter((function(t){return t._children.length>0}));return e.map((function(t,n){return{vjobj:t,ele:r[n]}}))}function j(t){for(var n=t.$sdfs2mat(),e=[{vjobj:[],ele:n[0][0]}],r=e;e.length>0;){next_unhandled=[];for(var i=function(t){var r=e[t].ele,i=e[t].vjobj,o=r._children.map((function(t){return n[t[0]][t[1]]})),u=o.map((function(t){return t._nd})).map((function(t){return O(t)}));u.forEach((function(t){return i.push(t)}));var f=A(o,u);next_unhandled=next_unhandled.concat(f)},o=0;o<e.length;o++)i(o);e=next_unhandled}return r[0].vjobj}t.exports={set_dict_via_pl:b,set_dflt_dict_via_pl:function(t,n,e){for(var r=t,i=0;i<n.length-1;i++){var o=n[i];void 0!==r[o]||(r[o]={}),r=r[o]}return r[n[n.length-1]]=e,t},get_val_via_pl:function(t,n){for(var e=0;e<t.length;e++)n=n[t[e]];return n},del_val_via_pl:function(t,n){for(var e=n,r=0;r<t.length-1;r++)n=n[t[r]];return delete n[t[t.length-1]],e},get_jobj_type:f,is_raw_type_via_str:s,get_jobj_child_klvl:a,jobj2tree:l,get_bracket_pl:function(t){var n=t.$ances(including_self=!0).map((function(t){return t.key})).reverse().slice(1);return(n=n.map((function(t){return"["+JSON.stringify(t)+"]"}))).join("")},get_pl:c,get_flat_key:h,get_container_or_val_via_nd:$,is_valid_dot_key:p,is_valid_nondot_key:function(t){return!((t=t.toString()).indexOf("[")>=0||t.indexOf("]")>=0)},is_valid_pl_for_dot:v,is_valid_pl_for_nondot:y,entries_to_dot_entries:_,dot_entries_to_entries:function(t){for(var n=[],e=0;e<t.length;e++){var r=t[e],i=JSON.parse(r[0]);if(!y(i=i.split(".")))throw r[0]+" have dot in it !! ";n.push([i.join("."),r[1]])}return n},flatten_to_dict:function(t){for(var n=d(t),e={},r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];e[i]=o}return e},flatten_to_dot_dict:function(t){for(var n=g(t),e={},r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];e[i]=o}return e},flatten_to_entries:d,flatten_to_dot_entries:g,deflatten_from_entries:m,deflatten_from_dot_entries:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=(t=n?JSON.parse(JSON.stringify(t)):t)[0][1],r=1;r<t.length;r++){var i=t[r][0].split("."),o=t[r][1];b(i,o,e)}return e},deflatten_from_dict:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=e?JSON.parse(JSON.stringify(t)):t;var r=[];for(var i in t){var o=JSON.parse(i),u=t[i];r.push([o,u])}n&&(r=w(r));for(var f=r[0][1],s=1;s<r.length;s++){var a=r[s][0],l=r[s][1];b(a,l,f)}return f},deflatten_from_dot_dict:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=e?JSON.parse(JSON.stringify(t)):t;var r=[];for(var i in t){var o=i.split("."),u=t[i];r.push([o,u])}n&&(r=w(r));for(var f=r[0][1],s=1;s<r.length;s++){var a=r[s][0],l=r[s][1];b(a,l,f)}return f},eq:function(t,n){try{assert.deepStrictEqual(t,n)}catch(t){return!1}return!0},struct_eq:function(t,n,e){var r,o,u=void 0===(e=void 0===e?{}:e).ignore_order||e.ignore_order,f=void 0!==e.compare_value_type&&e.compare_value_type,s=l(t),a=l(n);return r=u?i.struct_eq_ignore_order:i.struct_eq_keep_order,o=f?S:x,console.log(r,o),r(s,a,o)},tree2jobj:function(t){for(var n=t.$sdfs().map((function(t){return[c(t),$(t)]})),e=n[0][1],r=1;r<n.length;r++){b(n[r][0],n[r][1],e)}return e},tree2kjobj:E,tree2vjobj:j,unzip:function(t){var n=l(t);return{schema:E(n),vmat:j(n)}},zip:function(t){var n=t.schema,e=t.vmat,r=d(n),i=d(e);return m(r.map((function(t,n){return"string"==typeof t[1]?[t[0],i[n][1]]:t})))},arr_to_ltdict:k,convert_arr_to_dict:function(t){for(var n=l(t).$sdfs().map((function(t){return[c(t),$(t)]})),e=n[0][1],r=1;r<n.length;r++){var i=n[r][0],o=n[r][1];b(i,o=k(o),e)}return e}}},function(t,n,e){"use strict";var r;e.r(n),e.d(n,"v1",(function(){return v})),e.d(n,"v3",(function(){return S})),e.d(n,"v4",(function(){return E})),e.d(n,"v5",(function(){return j})),e.d(n,"NIL",(function(){return T})),e.d(n,"version",(function(){return P})),e.d(n,"validate",(function(){return f})),e.d(n,"stringify",(function(){return h})),e.d(n,"parse",(function(){return _}));var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var f=function(t){return"string"==typeof t&&u.test(t)},s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var l,c,h=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(s[t[n+0]]+s[t[n+1]]+s[t[n+2]]+s[t[n+3]]+"-"+s[t[n+4]]+s[t[n+5]]+"-"+s[t[n+6]]+s[t[n+7]]+"-"+s[t[n+8]]+s[t[n+9]]+"-"+s[t[n+10]]+s[t[n+11]]+s[t[n+12]]+s[t[n+13]]+s[t[n+14]]+s[t[n+15]]).toLowerCase();if(!f(e))throw TypeError("Stringified UUID is invalid");return e},d=0,p=0;var v=function(t,n,e){var r=n&&e||0,i=n||new Array(16),u=(t=t||{}).node||l,f=void 0!==t.clockseq?t.clockseq:c;if(null==u||null==f){var s=t.random||(t.rng||o)();null==u&&(u=l=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==f&&(f=c=16383&(s[6]<<8|s[7]))}var a=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,_=a-d+(v-p)/1e4;if(_<0&&void 0===t.clockseq&&(f=f+1&16383),(_<0||a>d)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,p=v,c=f;var y=(1e4*(268435455&(a+=122192928e5))+v)%4294967296;i[r++]=y>>>24&255,i[r++]=y>>>16&255,i[r++]=y>>>8&255,i[r++]=255&y;var g=a/4294967296*1e4&268435455;i[r++]=g>>>8&255,i[r++]=255&g,i[r++]=g>>>24&15|16,i[r++]=g>>>16&255,i[r++]=f>>>8|128,i[r++]=255&f;for(var b=0;b<6;++b)i[r+b]=u[b];return n||h(i)};var _=function(t){if(!f(t))throw TypeError("Invalid UUID");var n,e=new Uint8Array(16);return e[0]=(n=parseInt(t.slice(0,8),16))>>>24,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=255&n,e[4]=(n=parseInt(t.slice(9,13),16))>>>8,e[5]=255&n,e[6]=(n=parseInt(t.slice(14,18),16))>>>8,e[7]=255&n,e[8]=(n=parseInt(t.slice(19,23),16))>>>8,e[9]=255&n,e[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=n/4294967296&255,e[12]=n>>>24&255,e[13]=n>>>16&255,e[14]=n>>>8&255,e[15]=255&n,e};var y=function(t,n,e){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}(t)),"string"==typeof r&&(r=_(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+t.length);if(u.set(r),u.set(t,r.length),(u=e(u))[6]=15&u[6]|n,u[8]=63&u[8]|128,i){o=o||0;for(var f=0;f<16;++f)i[o+f]=u[f];return i}return h(u)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function g(t){return 14+(t+64>>>9<<4)+1}function b(t,n){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}function m(t,n,e,r,i,o){return b((u=b(b(n,t),b(r,o)))<<(f=i)|u>>>32-f,e);var u,f}function w(t,n,e,r,i,o,u){return m(n&e|~n&r,t,n,i,o,u)}function $(t,n,e,r,i,o,u){return m(n&r|e&~r,t,n,i,o,u)}function k(t,n,e,r,i,o,u){return m(n^e^r,t,n,i,o,u)}function x(t,n,e,r,i,o,u){return m(e^(n|~r),t,n,i,o,u)}var S=y("v3",48,(function(t){if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return function(t){for(var n=[],e=32*t.length,r=0;r<e;r+=8){var i=t[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);n.push(o)}return n}(function(t,n){t[n>>5]|=128<<n%32,t[g(n)-1]=n;for(var e=1732584193,r=-271733879,i=-1732584194,o=271733878,u=0;u<t.length;u+=16){var f=e,s=r,a=i,l=o;e=w(e,r,i,o,t[u],7,-680876936),o=w(o,e,r,i,t[u+1],12,-389564586),i=w(i,o,e,r,t[u+2],17,606105819),r=w(r,i,o,e,t[u+3],22,-1044525330),e=w(e,r,i,o,t[u+4],7,-176418897),o=w(o,e,r,i,t[u+5],12,1200080426),i=w(i,o,e,r,t[u+6],17,-1473231341),r=w(r,i,o,e,t[u+7],22,-45705983),e=w(e,r,i,o,t[u+8],7,1770035416),o=w(o,e,r,i,t[u+9],12,-1958414417),i=w(i,o,e,r,t[u+10],17,-42063),r=w(r,i,o,e,t[u+11],22,-1990404162),e=w(e,r,i,o,t[u+12],7,1804603682),o=w(o,e,r,i,t[u+13],12,-40341101),i=w(i,o,e,r,t[u+14],17,-1502002290),r=w(r,i,o,e,t[u+15],22,1236535329),e=$(e,r,i,o,t[u+1],5,-165796510),o=$(o,e,r,i,t[u+6],9,-1069501632),i=$(i,o,e,r,t[u+11],14,643717713),r=$(r,i,o,e,t[u],20,-373897302),e=$(e,r,i,o,t[u+5],5,-701558691),o=$(o,e,r,i,t[u+10],9,38016083),i=$(i,o,e,r,t[u+15],14,-660478335),r=$(r,i,o,e,t[u+4],20,-405537848),e=$(e,r,i,o,t[u+9],5,568446438),o=$(o,e,r,i,t[u+14],9,-1019803690),i=$(i,o,e,r,t[u+3],14,-187363961),r=$(r,i,o,e,t[u+8],20,1163531501),e=$(e,r,i,o,t[u+13],5,-1444681467),o=$(o,e,r,i,t[u+2],9,-51403784),i=$(i,o,e,r,t[u+7],14,1735328473),r=$(r,i,o,e,t[u+12],20,-1926607734),e=k(e,r,i,o,t[u+5],4,-378558),o=k(o,e,r,i,t[u+8],11,-2022574463),i=k(i,o,e,r,t[u+11],16,1839030562),r=k(r,i,o,e,t[u+14],23,-35309556),e=k(e,r,i,o,t[u+1],4,-1530992060),o=k(o,e,r,i,t[u+4],11,1272893353),i=k(i,o,e,r,t[u+7],16,-155497632),r=k(r,i,o,e,t[u+10],23,-1094730640),e=k(e,r,i,o,t[u+13],4,681279174),o=k(o,e,r,i,t[u],11,-358537222),i=k(i,o,e,r,t[u+3],16,-722521979),r=k(r,i,o,e,t[u+6],23,76029189),e=k(e,r,i,o,t[u+9],4,-640364487),o=k(o,e,r,i,t[u+12],11,-421815835),i=k(i,o,e,r,t[u+15],16,530742520),r=k(r,i,o,e,t[u+2],23,-995338651),e=x(e,r,i,o,t[u],6,-198630844),o=x(o,e,r,i,t[u+7],10,1126891415),i=x(i,o,e,r,t[u+14],15,-1416354905),r=x(r,i,o,e,t[u+5],21,-57434055),e=x(e,r,i,o,t[u+12],6,1700485571),o=x(o,e,r,i,t[u+3],10,-1894986606),i=x(i,o,e,r,t[u+10],15,-1051523),r=x(r,i,o,e,t[u+1],21,-2054922799),e=x(e,r,i,o,t[u+8],6,1873313359),o=x(o,e,r,i,t[u+15],10,-30611744),i=x(i,o,e,r,t[u+6],15,-1560198380),r=x(r,i,o,e,t[u+13],21,1309151649),e=x(e,r,i,o,t[u+4],6,-145523070),o=x(o,e,r,i,t[u+11],10,-1120210379),i=x(i,o,e,r,t[u+2],15,718787259),r=x(r,i,o,e,t[u+9],21,-343485551),e=b(e,f),r=b(r,s),i=b(i,a),o=b(o,l)}return[e,r,i,o]}(function(t){if(0===t.length)return[];for(var n=8*t.length,e=new Uint32Array(g(n)),r=0;r<n;r+=8)e[r>>5]|=(255&t[r/8])<<r%32;return e}(t),8*t.length))}));var E=function(t,n,e){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var i=0;i<16;++i)n[e+i]=r[i];return n}return h(r)};function O(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}}function A(t,n){return t<<n|t>>>32-n}var j=y("v5",80,(function(t){var n=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,u=Math.ceil(o/16),f=new Array(u),s=0;s<u;++s){for(var a=new Uint32Array(16),l=0;l<16;++l)a[l]=t[64*s+4*l]<<24|t[64*s+4*l+1]<<16|t[64*s+4*l+2]<<8|t[64*s+4*l+3];f[s]=a}f[u-1][14]=8*(t.length-1)/Math.pow(2,32),f[u-1][14]=Math.floor(f[u-1][14]),f[u-1][15]=8*(t.length-1)&4294967295;for(var c=0;c<u;++c){for(var h=new Uint32Array(80),d=0;d<16;++d)h[d]=f[c][d];for(var p=16;p<80;++p)h[p]=A(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var v=e[0],_=e[1],y=e[2],g=e[3],b=e[4],m=0;m<80;++m){var w=Math.floor(m/20),$=A(v,5)+O(w,_,y,g)+b+n[w]+h[m]>>>0;b=g,g=y,y=A(_,30)>>>0,_=v,v=$}e[0]=e[0]+v>>>0,e[1]=e[1]+_>>>0,e[2]=e[2]+y>>>0,e[3]=e[3]+g>>>0,e[4]=e[4]+b>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]})),T="00000000-0000-0000-0000-000000000000";var P=function(t){if(!f(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}}])}));
//# sourceMappingURL=fpromise.js.map